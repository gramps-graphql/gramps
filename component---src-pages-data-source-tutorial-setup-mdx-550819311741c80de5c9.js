(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{386:function(e,t,a){"use strict";a.r(t),a.d(t,"_frontmatter",(function(){return s})),a.d(t,"default",(function(){return u}));a(11),a(5),a(6),a(2),a(10),a(1),a(0);var o=a(103),r=a(395);function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o])}return e}).apply(this,arguments)}var s={},c=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(o.b)("div",t)}},i=c("AnchorLinks"),l=c("AnchorLink"),b={_frontmatter:s},p=r.a;function u(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,o,r={},n=Object.keys(e);for(o=0;o<n.length;o++)a=n[o],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["components"]);return Object(o.b)(p,n({},b,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"In this tutorial, we’re going to create a data source for ",Object(o.b)("a",n({parentName:"p"},{href:"http://www.theimdbapi.org/"}),"the IMDB API"),", which allows us to look up information about movies."),Object(o.b)("h2",{id:"table-of-contents"},"Table of Contents"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("strong",{parentName:"li"},"> ",Object(o.b)("a",n({parentName:"strong"},{href:"/data-source-tutorial/setup"}),"Initial Data Source Setup"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",n({parentName:"li"},{href:"/data-source-tutorial/connector"}),"Create a Connector")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",n({parentName:"li"},{href:"/data-source-tutorial/model"}),"Create a Model")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",n({parentName:"li"},{href:"/data-source-tutorial/schema"}),"Write a GraphQL Schema")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",n({parentName:"li"},{href:"/data-source-tutorial/resolvers"}),"Write Resolvers")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",n({parentName:"li"},{href:"/data-source-tutorial/dev"}),"Use Development Modes"))),Object(o.b)("h2",{id:"in-this-section"},"In This Section"),Object(o.b)(i,{mdxType:"AnchorLinks"},Object(o.b)(l,{mdxType:"AnchorLink"},"Install the Data Source Base"),Object(o.b)(l,{mdxType:"AnchorLink"},"Update the Context Name for the Data Source"),Object(o.b)(l,{mdxType:"AnchorLink"},"Update package.json"),Object(o.b)(l,{mdxType:"AnchorLink"},"Update the README")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"NOTE:")," The goal of this tutorial is to create a data source that will act\nas a pass-through layer, meaning the GraphQL schema will exactly match the\nREST API response. This is not the only way to approach a data source, so\nplease refer to this less as a “how to design a schema” tutorial than a “how\nto create a GrAMPS-compatible data source” tutorial.")),Object(o.b)("h2",{id:"install-the-data-source-base"},"Install the Data Source Base"),Object(o.b)("p",null,"To start off with most of the boilerplate taken care of, we’ll use the ",Object(o.b)("a",n({parentName:"p"},{href:"https://github.com/gramps-graphql/data-source-base"}),"GrAMPS data source base")," as our starting point."),Object(o.b)("p",null,"Create a folder for your new data source, then clone the data source base into it, update your remote Git URL, and install the dependencies."),Object(o.b)("pre",null,Object(o.b)("code",n({parentName:"pre"},{className:"language-sh"}),"# Create a folder for your data source and move into it\nmkdir data-source-imdbapi\ncd data-source-imdbapi/\n\n# Clone the data source base into the new folder (note the trailing .)\ngit clone git@github.com:gramps-graphql/data-source-base.git .\n\n# Change the remote URL to your data source GitHub repo\ngit remote set-url origin git@github.com:gramps-graphql/data-source-imdbapi.git\n\n# Install dependencies\nyarn install\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"NOTE:")," We use ",Object(o.b)("a",n({parentName:"p"},{href:"https://yarnpkg.com"}),"Yarn")," because it’s currently better than npm at creating\nlockfiles and tends to be a little faster/less verbose than npm. That being\nsaid, you can use npm if you prefer without any problems.")),Object(o.b)("h2",{id:"update-the-context-name-for-the-data-source"},"Update the Context Name for the Data Source"),Object(o.b)("p",null,"In a GraphQL server, resolver functions receive what’s called a “context”, which is an object that contains whatever we, as developers, want to pass along to help resolve our queries. The most common use of this is to provide a means of loading data, which is referred to as a “model” in the GrAMPS ecosystem."),Object(o.b)("p",null,"Each GrAMPS data source will add its model to the context under a unique identifier, which we need to choose."),Object(o.b)("p",null,"Open ",Object(o.b)("inlineCode",{parentName:"p"},"src/index.js")," and update the context:"),Object(o.b)("pre",null,Object(o.b)("code",n({parentName:"pre"},{className:"language-diff"}),"  import schema from './schema.graphql';\n  import resolvers from './resolvers';\n  import Connector from './connector';\n  import Model from './model';\n\n  /*\n   * For more information on the main data source object, see\n   * https://gramps.js.org/api/gramps/#gramps\n   */\n  export default {\n-   // TODO: Rename the context to describe the data source.\n-   context: 'YourDataSource',\n+   context: 'IMDBAPI',\n    model: new Model({ connector: new Connector() }),\n    schema,\n    resolvers,\n  };\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"NOTE:")," In code examples, we show the diff of the changed file, which means\nred lines are the original code that needs to be changed or removed, and\ngreen lines show the completed edits.")),Object(o.b)("h2",{id:"update-packagejson"},"Update package.json"),Object(o.b)("p",null,"Before we work on the code itself, we need to do a little bit of housekeeping. First, let’s edit ",Object(o.b)("inlineCode",{parentName:"p"},"package.json")," to add the correct info about our new data source."),Object(o.b)("pre",null,Object(o.b)("code",n({parentName:"pre"},{className:"language-diff"}),'  {\n-   "name": "@gramps/data-source-base",\n+   "name": "@gramps/data-source-imdbapi",\n-   "description": "Base modules for a GrAMPS GraphQL data source.",\n+   "description": "GrAMPS GraphQL data source for the IMDB API.",\n    "contributors": [\n-     "Jason Lengstorf <jason@lengstorf.com>"\n+     "Your Name <your.email@example.org>"\n    ],\n    "repository": {\n      "type": "git",\n-     "url": "https://github.com/gramps-graphql/data-source-base.git"\n+     "url": "https://github.com/gramps-graphql/data-source-imdbapi.git"\n    },\n    // ...\n  }\n')),Object(o.b)("h2",{id:"update-the-readme"},"Update the README"),Object(o.b)("p",null,"Make sure to edit the name of the repo and the badges to point to your data source repo. An easy way to do this is to search for ",Object(o.b)("inlineCode",{parentName:"p"},"data-source-base")," in the README to find all the places that need to be updated."),Object(o.b)("h2",{id:"next-up-create-a-connector"},"Next Up: Create a Connector"),Object(o.b)("p",null,"With the initial setup out of the way, we can start writing actual code. In the next section, we’ll tell our data source where to load data from."))}u.isMDXComponent=!0},393:function(e){e.exports=JSON.parse('{"data":{"site":{"pathPrefix":""}}}')},394:function(e){e.exports=JSON.parse('{"data":{"site":{"siteMetadata":{"repository":{"baseUrl":"","subDirectory":""}}}}}')},395:function(e,t,a){"use strict";a(35),a(27);var o=a(1),r=a(393),n=a(0),s=a.n(n),c=a(102),i=a.n(c),l=a(188),b=a(121),p=a(3),u=a.n(p),d=a(373),h=function(e){var t,a=e.title,r=e.tabs,n=void 0===r?[]:r;return Object(o.b)("div",{className:u()(d.pageHeader,(t={},t[d.withTabs]=n.length,t))},Object(o.b)("div",{className:"bx--grid"},Object(o.b)("div",{className:"bx--row"},Object(o.b)("div",{className:"bx--col-lg-12"},Object(o.b)("h1",{id:"page-title",className:d.text},a)))))},m=a(394),g=a(374),f=function(e){var t=e.relativePagePath,a=e.repository,r=m.data.site.siteMetadata.repository,n=a||r,s=n.baseUrl,c=s+"/tree/master"+n.subDirectory+"/src/pages"+t;return s?Object(o.b)("div",{className:"bx--row "+g.row},Object(o.b)("div",{className:"bx--col"},Object(o.b)("a",{className:g.link,href:c},"Edit this page on GitHub"))):null},O=a(186),j=a(28),w=a(375);var N=function(e){var t,a;function r(){return e.apply(this,arguments)||this}return a=e,(t=r).prototype=Object.create(a.prototype),t.prototype.constructor=t,t.__proto__=a,r.prototype.render=function(){var e=this.props,t=e.tabs,a=e.slug,r=a.split("/").filter(Boolean).slice(-1)[0],n=t.map((function(e){var t,n=i()(e,{lower:!0}),s=n===r,c=a.replace(r,n);return Object(o.b)("li",{key:e,className:u()((t={},t[w.selectedItem]=s,t),w.listItem)},Object(o.b)(j.Link,{className:w.link,to:""+c},e))}));return Object(o.b)("div",{className:w.tabsContainer},Object(o.b)("div",{className:"bx--grid"},Object(o.b)("div",{className:"bx--row"},Object(o.b)("div",{className:"bx--col-lg-12 bx--col-no-gutter"},Object(o.b)("nav",null,Object(o.b)("ul",{className:w.list},n))))))},r}(s.a.Component),v=a(187);t.a=function(e){var t=e.pageContext,a=e.children,n=e.location,s=t.frontmatter,c=void 0===s?{}:s,p=t.relativePagePath,u=t.titleType,d=c.tabs,m=c.title,g=c.theme,j=c.description,w=c.keywords,y=r.data.site.pathPrefix,x=y?n.pathname.replace(y,""):n.pathname,k=d?x.split("/").slice(-1)[0]||i()(d[0],{lower:!0}):"";return Object(o.b)(b.a,{homepage:!1,theme:g,pageTitle:m,pageDescription:j,pageKeywords:w,titleType:u},Object(o.b)(h,{title:m,label:"label",tabs:d}),d&&Object(o.b)(N,{slug:x,tabs:d,currentTab:k}),Object(o.b)(v.a,{padded:!0},a,Object(o.b)(f,{relativePagePath:p})),Object(o.b)(O.a,{pageContext:t,location:n,slug:x,tabs:d,currentTab:k}),Object(o.b)(l.a,null))}}}]);
//# sourceMappingURL=component---src-pages-data-source-tutorial-setup-mdx-550819311741c80de5c9.js.map